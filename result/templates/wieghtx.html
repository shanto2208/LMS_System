{% extends "nav.html" %}

{% load static %}
<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>
      {% block title%}

      {% endblock title%}
    </title>  
    {% load static %}  

    {% block css%}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="{% static 'css/wieght.css' %}" rel="stylesheet"> 
    {% endblock css%}
    
</head>  


<body>  
    {% block body %}
    
    <div class="container">
      <div class="head">
        <h1 class="head1">{{ x }}</h1>
      </div>
      <div class="noti">

        {% if noti == 2 %}
          <div class="alert alert-danger" role="alert">
            Your total number cross 100.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            
          </div>
        {% elif noti == 1 %}
          <div class="alert alert-success" role="alert">
            Assesment add successful.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
          </div>
          
        {% endif %}

      </div>

      
      <div class="flex-container">
        
        <div class="flex-container">

            <table class="table table-bordered">
                <thead>
                  <tr>
                    <th colspan="100%" class="mkr">Marks Distribution </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                        <th class="mk"><b>Assignment Items</th>
                        {% for co in courseCos2 %}
              
                          <th scope="col">{{co.courseCosname}}</th>
                                  
                        {% endfor %}
                        <th><b>Others</th>
                        <th><b>Weight</th>
                        <th rowspan="1"><b>Exam Taken in</th>
                        <th><b>Ratio</th>
                  </tr>
                  <form method="POST" >
                    {% csrf_token %}
                {% for ex in course_assesments_mark2 %}
                    <tr>
                      <th class="mk"><b>{{ ex.course_ass_name }}</th>

                            {% for weight in course_lms_wieght2 %}
                              {% if ex.course_ass_name == weight.course_asses_name %}
                                {% for copo in courseCos2 %}
                                  {% if weight.course_co_name == copo.courseCosname %}
                                    <th scope="col"><input type="text" name="{{ex.course_ass_name}}{{ weight.course_co_name}}" id="inputPassword6" class="form-control" value="{{ weight.course_asses_point}}" aria-describedby="passwordHelpInline"></th>
                                  {% endif %}
                                {% endfor %}
                              {% endif %}
                            {% endfor %}

                            {% for others in others_course_assesments_mark2 %}
                              {% if others.others_course_ass_name == ex.course_ass_name %}

                              <th scope="col"><input type="text" name="{{ex.course_ass_name}}{{ others.others_course_others_name}}" id="inputPassword6" class="form-control" value="{{ others.others_course_ass_point}}" aria-describedby="passwordHelpInline"></th>
                              
                              {% endif %}
                            {% endfor %}

                            {% for total2 in course_wieght_number2 %}
                              {% if total2.course_Exam_name == ex.course_ass_name %}
                                <th><b>{{total2.course_wieght}}</th>
                                <th><b>{{total2.course_taken}}</th>
                                <th><b><input type="text" name="{{total2.course_Exam_name}}" id="inputPassword6" class="form-control" value="{{total2.course_ratio}}" aria-describedby="passwordHelpInline"></th>
                              {% endif %}
                            {% endfor %}
                            
                    </tr>

                    
                    {% endfor %}
                    <tr>
                      <th>Total</th>

                      {% for copo in courseCos2 %}
                        <th >{{copo.courseCosmark}}</th>
                      {% endfor %}
                      <th></th>
                      {% for total in weightx1 %}
                        <th>{{total.totalweight}}</th>
                      {% endfor %}
                    </tr>
                    <tr>

                      <th colspan="100" ><button type="Submit" class="btn btn-primary">Save changes</button> <th>
                    </tr>
                    
                    <form>
                    

                    <!-- Button trigger modal -->



                </tbody>
                
              </table>
        </div>      
      </div>

      <div class="chart1">
      
        <div class="head2">
          <h4 class="head1">CO Distribution Summary</h4>
        </div>

       
        <canvas class="semester_chart" id="myChart" height="200px" width='200px' ></canvas>
    

      <script>
          const ctx = document.getElementById('myChart');
      
          new Chart(ctx, {
            type: 'bar',
            data: {
              labels: [{% for s in courseCos2 %} '{{ s.courseCosname }}' , {% endfor %}],
              datasets: [{
                label:"# of CO",
                data: [{% for m in courseCos2 %} '{{ m.courseCosmark }}', {% endfor %}],
                backgroundColor: [

                'rgba(100, 149, 237, 1.2)',
                

                ],
                borderColor: [
                'rgb(75, 192, 192, 105)',
                
              
              
                ],
                
              
              
                borderWidth: 1
              }]
            
            },
            options: {
              scales: {
                y: {
                  beginAtZero: true
                }
              }
            }
          });
        </script>


      </div>
        
    </div>


      


      <script>
        function validateForm() {
          var x = document.forms["myForm"]["ass_name"].value;

          var y = document.forms["myForm"]["ass_point"].value;
          if (x == "" || x == null) {
            alert("Name must be filled out");
            return false;
          }

          if (y == "")
            {
              alert("Point must be filled out");
              return false;
            }
        }
      </script>

      <script>
          // Get a reference to the button element
          const button = document.getElementById('my-button');
        
          // Attach a click event listener to the button
          button.addEventListener('click', function() {
            // Get the value stored in the data-value attribute
            const value = this.getAttribute('data-value');
        
            // Use the value to trigger the pop-up or do something else
            console.log(value);
          });
      </script>

        

    {% endblock body %}



  </body>  

</html>  