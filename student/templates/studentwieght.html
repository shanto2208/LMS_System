{% extends "student_nav.html" %}

{% load static %}
<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>
      {% block title%}

      {% endblock title%}
    </title>  
    {% load static %}  

    {% block css%}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="{% static 'css/wieght.css' %}" rel="stylesheet"> 
    {% endblock css%}
    
</head>  


<body>  
    {% block body %}
    
    <div class="container">
      <div class="head">
        <h1 class="head1">{{ class3}} &emsp; Sec-{{sec}} </h1>
      </div>
      <div class="noti">

        {% if noti == 2 %}
          <div class="alert alert-danger" role="alert">
            Your total number cross 100.
          </div>
        {% elif noti == 1 %}
          <div class="alert alert-success" role="alert">
            Assesment add successful.
          </div>
        {% endif %}

      </div>

      <div class="flex-container">
        <div class="weight"><a class="btn btn-danger " href="{% url 'studentResult' x=x%}">Result</a></div>
        <div class="weight"><a class="btn btn-info active" href="{% url 'studentwieght' x=x%}">Weight</a></div>
        
      </div>
      <div class="flex-container">


        <div class="flex-container">

            <table class="table table-bordered">
                <thead>
                  <tr>
                    <th colspan="100%" class="mkr">Marks Distribution </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                        <th class="mk"><b>Assignment Items</th>
                        {% for co in co_lis %}
                            {% for copo in classco2 %}
                                  {% if co.co_name == copo.classCosname %}
                                  
                                  <th scope="col">{{co.co_name}}</th>
                                  {% endif %}
                            {% endfor %}
                        {% endfor %}
                        <th><b>Others</th>
                        <th><b>Weight</th>
                        <th rowspan="1"><b>Exam Taken in</th>
                        <th><b>Ratio</th>
                  </tr>
                  <form method="POST" >
                    {% csrf_token %}
                {% for ex in exam %}
                    <tr>
                      <th class="mk"><b>{{ ex.ass_name }}</th>
                            {% for weight in weight2 %}
                            {% if ex.ass_name  == weight.asses_name %}
                              {% for co in co_lis %}
                                
                                  {% if co.co_name == weight.co_name %}
                                    {% for copo in classco2 %}
                                      {% if co.co_name == copo.classCosname %}
                                        <th scope="col">{{ weight.asses_point}}</th>
                                      {% endif %}
                                    {% endfor %}
                                  {% endif %}
                              {% endfor %}
                              {% endif %}
                            {% endfor %}

                            {% for x in others_assesments_mark3 %}
                              {% if x.others_ass_name == ex.ass_name %}
                              <th scope="col">{{ x.others_ass_point}}</th>
                              {% endif %}
                            {% endfor %}

                            

                            {% for total2 in total %}
                              {% if total2.Exam_name == ex.ass_name %}
                                <th>{{total2.wieght}}</th>
                                <th>{{total2.taken}}</th>
                                <th>{{total2.ratio}}</th>
                              {% endif %}
                            {% endfor %}
                            
                    </tr>

                    
                    {% endfor %}
                    <tr>
                      
                      <th>Total</th>

                      {% for copo in classco2 %}
                        <th >{{copo.classCosmark}}</th>
                      {% endfor %}

                      <th></th>

                      {% for total in weightx1 %}
                        <th>{{total.totalweight}}</th>
                      {% endfor %}
                    </tr>
                    <form>
                    

                    <!-- Button trigger modal -->



                </tbody>
                
              </table>
        </div>      
      </div>

      <div class="chart1">
      
        <div class="head2">
          <h4 class="head1">CO Distribution Summary</h4>
        </div>

       
        <canvas class="semester_chart" id="myChart" height="200px" width='200px' ></canvas>
    

      <script>
          const ctx = document.getElementById('myChart');
      
          new Chart(ctx, {
            type: 'bar',
            data: {
              labels: [{% for s in classco2 %} '{{ s.classCosname }}' , {% endfor %}],
              datasets: [{
                label:"# of CO",
                data: [{% for m in classco2 %} '{{ m.classCosmark }}', {% endfor %}],
                backgroundColor: [

                'rgba(100, 149, 237, 1.2)',
                

                ],
                borderColor: [
                'rgb(75, 192, 192, 105)',
                
              
              
                ],
                
              
              
                borderWidth: 1
              }]
            
            },
            options: {
              scales: {
                y: {
                  beginAtZero: true
                }
              }
            }
          });
        </script>


      </div>
        
    </div>


      


      <script>
        function validateForm() {
          var x = document.forms["myForm"]["ass_name"].value;

          var y = document.forms["myForm"]["ass_point"].value;
          if (x == "" || x == null) {
            alert("Name must be filled out");
            return false;
          }

          if (y == "")
            {
              alert("Point must be filled out");
              return false;
            }
        }
      </script>

      <script>
          // Get a reference to the button element
          const button = document.getElementById('my-button');
        
          // Attach a click event listener to the button
          button.addEventListener('click', function() {
            // Get the value stored in the data-value attribute
            const value = this.getAttribute('data-value');
        
            // Use the value to trigger the pop-up or do something else
            console.log(value);
          });
      </script>

        

    {% endblock body %}



  </body>  

</html>  